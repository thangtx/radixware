<?xml version="1.0" encoding="UTF-8"?>
<AdsDefinition xmlns="http://schemas.radixware.org/adsdef.xsd" xmlns:xsc="http://schemas.radixware.org/xscml.xsd" FormatVersion="0">
  <AdsClassDefinition Id="adcA3INHB3PFJA2JLS7Z33GFYG22A" Name="EventLogExporter" Type="3" Environment="server">
    <AccessRules Access="4" IsPublished="false">
      <Transparence Extendable="false"/>
    </AccessRules>
    <Headers>
      <Src Name="HeaderadcHNU5CKYRWVB4TPGXB4CWBWQZNA">
        <xsc:Item>
          <xsc:Java>import javax.xml.stream.XMLOutputFactory;
import javax.xml.stream.XMLStreamWriter;</xsc:Java>
        </xsc:Item>
      </Src>
    </Headers>
    <Bodies>
      <Src Name="Bodyadc6ZT2ZY3KWRG53A5WQ5E6N3MQ3I"/>
    </Bodies>
    <MethodGroup Id="cmgYIEIIYLORZAVTKAALQCST6CIXY" Name="Root"/>
    <PropertyGroup Id="cpgM52TYXI75NG5RATSEO2IP346W4" Name="Root"/>
    <Properties/>
    <Methods>
      <Method Id="mthAVPXNJUXERGZJBVDUBUNUQPADM" Name="export" Nature="0" IsOverride="false">
        <AccessRules Access="4" IsPublished="false" IsStatic="true"/>
        <Parameters>
          <Parameter Name="fileName" Id="mpr6PKJVSPDJBEC5FJU2LQAUT5X4U">
            <Type TypeId="21"/>
          </Parameter>
          <Parameter Name="maxCount" Id="mpr6ETN2LT3GBBVFDVNATCRDDSQMM">
            <Type TypeId="2"/>
          </Parameter>
          <Parameter Name="iterator" Id="mprGV7FP5YNQJDK7BQRRRFDH7X6CE">
            <Type TypeId="400" extStr="java.util.Iterator">
              <xsc:GenericArguments>
                <xsc:Argument DerivationRule="extends" Alias="?">
                  <xsc:Type TypeId="411" Path="pdcEntity____________________"/>
                </xsc:Argument>
              </xsc:GenericArguments>
            </Type>
          </Parameter>
          <Parameter Name="exported" Id="mpr4WQAFBTZCVDSNPXFEKATGW6UWQ">
            <Type TypeId="411" Path="aicMNTJFQUBYNEQ3KWSWNNYPML74I"/>
          </Parameter>
        </Parameters>
        <ThrownExceptions>
          <Exception TypeId="411" Path="axcRXVJYKJJKZAJHEP4D4632RQPKM"/>
          <Exception TypeId="411" Path="axcWGDHFHONYFCQFIQSELYRVS7DJ4"/>
          <Exception TypeId="411" Path="axcTYUDRQZMVJFTZNOQKKR2LEJUDU"/>
          <Exception TypeId="411" Path="axcG6PZC4JQPBAI5C7ZFKWL4SWGKA"/>
          <Exception TypeId="411" Path="axcRY54WWJPFFHMNF6SOH5KQIXBJU"/>
          <Exception TypeId="411" Path="axc4C6SVPUO4NC2TJFRZKRSBDAHFY"/>
        </ThrownExceptions>
        <Sources>
          <Src>
            <xsc:Item>
              <xsc:Java>final </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> nameSpace = "http://schemas.radixware.org/systemcommands.xsd";
</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcFileOutResource___________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> fileOut = null;
XMLStreamWriter writer = null;
</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcProgressDialogResourceProc"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> process = null;
try {
    </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcProgressDialogResource____"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> dlg = new </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcProgressDialogResource____ mthC5IM4X76VRD6XN4BV3ALQXGFYU" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcArte______________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcArte______________________ mthX22GMFYBKNC6RGIHJSGRQQ7K2A" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(), </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsMAJ65KZ6DBF5ZGU5BJLN5US2WY"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, true);
    process = dlg.startNewProcess(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsGO6MZAA6ING5VCGP3XZ7K5XDHA"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, true, maxCount != null);
    fileOut = new </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcFileOutResource___________ mthRTCDLQYWGZCCLBWYK74OTYDKFI" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcArte______________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcArte______________________ mthX22GMFYBKNC6RGIHJSGRQQ7K2A" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(),
            fileName,
            </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="acsQ2VTKPOMHTNRDCGPABIFNQAABA aciEOBEJTYZVPORDJHCAANE2UAFXA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>,
            </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="acsFIH6I56MHTNRDCGPABIFNQAABA aciE6BEJTYZVPORDJHCAANE2UAFXA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
    writer = XMLOutputFactory.newInstance().createXMLStreamWriter(fileOut, "UTF-8");
    writer.setDefaultNamespace(nameSpace);
    
    writer.writeStartDocument();
    writer.writeCharacters("\n");
    writer.writeStartElement(nameSpace, "EventList");
    writer.writeDefaultNamespace(nameSpace);
    
    writer.writeAttribute("TimeZone", java.util.TimeZone.getDefault().getID());
    
    int i = 0;
    final int iMaxCount = maxCount != null
            ? maxCount.intValue()
            : Integer.MAX_VALUE;
    </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="aecACQVZOMVVHWDBROXAAIT4AGD7E"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> event;
    while(i&lt;iMaxCount &amp;&amp; null != (event = exported.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aicMNTJFQUBYNEQ3KWSWNNYPML74I mthNXJINMB2URDRBHIRUCINEMUHU4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(iterator))) {        
        i++;
        if(i%100 == 0) {
            writer.flush();
            final Float percent = maxCount != null ? ((float)i*100)/iMaxCount : null;
            if(!</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcA3INHB3PFJA2JLS7Z33GFYG22A"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcA3INHB3PFJA2JLS7Z33GFYG22A mthYBCJN7FYDFH4NFES3H4JZLI2UQ" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(process, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsFXLSVCH7MZGLRD3VCHLWEWVDSU"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> + i, percent))
                return;
        }
        
        if(event != null) {
            event.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecACQVZOMVVHWDBROXAAIT4AGD7E mthGPP7O3K3K5BFDGR2F7NGSOILNQ" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(writer, nameSpace);
        }
    }
    writer.writeCharacters("\n");
    writer.writeEndElement();
    writer.flush();
    
    try {
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcMessageDialogResource_____"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.information(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcArte______________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcArte______________________ mthX22GMFYBKNC6RGIHJSGRQQ7K2A" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(), </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsNALGNQR4JJFVDCLROENT5OYOLA"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, String.format(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsQU3DKXEJLNBH7PMZBSA7NDE3S4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, i));
    } catch(Exception e) {
    }
} finally {
    if(process!=null)
        try {
            process.close();
        } catch(Exception e) {
            process = null;
        }
    
    
    if(fileOut != null) {
        try {
            if(writer != null) {
                writer.writeEndDocument();
                writer.flush();
            }
        } catch(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="axc4C6SVPUO4NC2TJFRZKRSBDAHFY"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> e) {
            </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcTrace_____________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcTrace_____________________ mthP66N3O2SRPNRDCISABIFNQAABA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(e.getMessage(), </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="acsTNLJBZADHTNRDIPGABQAQNO6EY aci7SAUJTYZVPORDJHCAANE2UAFXA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
        }
        try {
            fileOut.close();
        } catch(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="axcT6PDWQP2FRBGJJE4ZJYCMR2CDM"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> e) {
            </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcTrace_____________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcTrace_____________________ mthP66N3O2SRPNRDCISABIFNQAABA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(e.getMessage(), </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="acsTNLJBZADHTNRDIPGABQAQNO6EY aci7SAUJTYZVPORDJHCAANE2UAFXA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
        }
    }
}</xsc:Java>
            </xsc:Item>
          </Src>
        </Sources>
      </Method>
      <Method Id="mthYBCJN7FYDFH4NFES3H4JZLI2UQ" Name="setTitleAndPercent" Nature="0" IsOverride="false">
        <AccessRules Access="2" IsFinal="true" IsPublished="false" IsStatic="true"/>
        <Parameters>
          <Parameter Name="process" Id="mprKLIVPEIHFRBK3MQEVL2TNNXODY">
            <Type TypeId="411" Path="pdcProgressDialogResourceProc"/>
          </Parameter>
          <Parameter Name="title" Id="mprRRIZQWDLZRATNB3GCHKXQI7TGU">
            <Type TypeId="21"/>
          </Parameter>
          <Parameter Name="percent" Id="mprWSAVEBMPRNAVLDMFWK6PFIOUIU">
            <Type TypeId="400" extStr="java.lang.Float"/>
          </Parameter>
        </Parameters>
        <ReturnType TypeId="401" extStr="boolean"/>
        <Sources>
          <Src>
            <xsc:Item>
              <xsc:Java>if(process == null)
    return true;

try {
    if(process.checkIsCancelled()) {
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcMessageDialogResource_____"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcMessageDialogResource_____ mthMEU3KZI4OZEDBFXIQH6M3PRIPA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcArte______________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcArte______________________ mthX22GMFYBKNC6RGIHJSGRQQ7K2A" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(), </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsKCYP5BSOMZAFPJPJSFO4KD3OWM"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsDUIBBI7E25BYHJ2BYFLPFMXNKQ"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
        return false;
    }
    process.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcProgressDialogResourceProc mthAE7I7CG6LRCUTPDSXDSOB7YV2I" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(title, percent, true);
} catch(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="axcRXVJYKJJKZAJHEP4D4632RQPKM"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> e) {
    throw new </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="axcTNXCEKEORVFRFDUEZO3MB5REHQ mth5TTUPQZBRBFJPJTYFH3A54IZFY" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(e.getMessage(), e);
} catch(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="axcWGDHFHONYFCQFIQSELYRVS7DJ4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> e) {
    </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcTrace_____________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcTrace_____________________ mthP66N3O2SRPNRDCISABIFNQAABA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(e.getMessage(), </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="acsTNLJBZADHTNRDIPGABQAQNO6EY aci7SAUJTYZVPORDJHCAANE2UAFXA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
} catch(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="axcTYUDRQZMVJFTZNOQKKR2LEJUDU"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> e) {
    </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="pdcTrace_____________________"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="pdcTrace_____________________ mthP66N3O2SRPNRDCISABIFNQAABA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(e.getMessage(), </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="acsTNLJBZADHTNRDIPGABQAQNO6EY aci7SAUJTYZVPORDJHCAANE2UAFXA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
}

return true;</xsc:Java>
            </xsc:Item>
          </Src>
        </Sources>
      </Method>
    </Methods>
  </AdsClassDefinition>
</AdsDefinition>
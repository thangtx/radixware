<?xml version="1.0" encoding="UTF-8"?>
<AdsDefinition xmlns="http://schemas.radixware.org/adsdef.xsd" xmlns:xsc="http://schemas.radixware.org/xscml.xsd" FormatVersion="0">
  <AdsContextlessCommandDefinition Id="clc2ZECIOT4VFFE5MWTW4A7FVMVF4" Name="GetAlgoContext" Nature="2" IconId="imgHFKN7TN3YXH3FX6UN5F2NMEBIP7JBKPT" IsVisible="false" IsConfirmationRequired="false">
    <InType TypeId="451" Path="xsdAVNC5OMH2DNRDISQAAAAAAAAAA" extStr="ViewAlgoRqDocument"/>
    <OutType TypeId="451" Path="xsdJUNRXYZPE3OBDGYTABIFNQAABA" extStr="ContextDocument"/>
    <Source>
      <xsc:Item>
        <xsc:Java>final </xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="2"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java> processId = input.ViewAlgoRq.ProcessId;
final </xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="411" Path="aecRDXQVFY6PLNRDANMABIFNQAABA"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java> process = </xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="411" Path="aecRDXQVFY6PLNRDANMABIFNQAABA"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>.</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:IdReference Path="aecRDXQVFY6PLNRDANMABIFNQAABA mth_loadByPK_________________" Invoke="true"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>(processId, true);

</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="451" Path="xsdJUNRXYZPE3OBDGYTABIFNQAABA" extStr="ContextDocument"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java> xContext;
try {
    xContext = </xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="451" Path="xsdJUNRXYZPE3OBDGYTABIFNQAABA" extStr="ContextDocument"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>.Factory.parse(process.</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:IdReference Path="aecRDXQVFY6PLNRDANMABIFNQAABA colKD4KAOZAPLNRDANMABIFNQAABA" Invoke="true"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>.getCharacterStream());
} catch (</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="411" Path="axcVN3PK4FIINBOLIFTWXCBTA6UHI"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java> e) {
    xContext = null;
}

if (xContext == null)
    return null;

final java.util.Map&lt;</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="411" Path="adcELH54EKVCJAATNTLFHHCSVHPZU"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>, byte[]> id2Val = new java.util.HashMap&lt;</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="411" Path="adcELH54EKVCJAATNTLFHHCSVHPZU"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>, byte[]>();
for (</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="451" Path="xsdJUNRXYZPE3OBDGYTABIFNQAABA" extStr="ContextDocument.Context.Data.DataItem"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java> xDataItem : xContext.Context.Data.DataItemList) {
    if (xDataItem.getRef()) {
        final </xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="411" Path="adcELH54EKVCJAATNTLFHHCSVHPZU"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java> id = </xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="411" Path="adcKDF543XQWZEI5DORWHNFIYCZ2A"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>.</xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:IdReference Path="adcKDF543XQWZEI5DORWHNFIYCZ2A mthGFAPI2TPWZEJHN436UQMWZIPZM" Invoke="true"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>(new </xsc:Java>
      </xsc:Item>
      <xsc:Item>
        <xsc:TypeDeclaration TypeId="21"/>
      </xsc:Item>
      <xsc:Item>
        <xsc:Java>(xDataItem.getByteArrayValue()));
        if (id2Val.containsKey(id))
            xDataItem.ByteArrayValue = id2Val.get(id);
    } else {
        id2Val.put(xDataItem.Id, xDataItem.ByteArrayValue);
    }
}

return xContext;</xsc:Java>
      </xsc:Item>
    </Source>
  </AdsContextlessCommandDefinition>
</AdsDefinition>
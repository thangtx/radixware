<?xml version="1.0" encoding="UTF-8"?>
<AdsDefinition xmlns="http://schemas.radixware.org/adsdef.xsd" xmlns:xsc="http://schemas.radixware.org/xscml.xsd" FormatVersion="0">
  <AdsClassDefinition Id="adcWYF5UGWT4ZAT7NTUSSOFE3P2WQ" Name="PasswordDialogController" Type="3" Environment="common-client">
    <AccessRules IsPublished="false">
      <Transparence Extendable="false"/>
    </AccessRules>
    <Headers>
      <Src Name="HeaderadcQKS7XC4VRNA2TB57I4I6VVHMIM"/>
    </Headers>
    <Bodies>
      <Src Name="BodyadcUVVYH7SOVFE3ROP4TZZG6C42Y4"/>
    </Bodies>
    <MethodGroup Id="cmgRGLYSJ3TFVAFVB54ADBKNQPOGU" Name="Root"/>
    <PropertyGroup Id="cpg4XODDGIGIVEWTNG64NYMOVGYCQ" Name="Root"/>
    <Properties/>
    <Methods>
      <Method Id="mthNANSAC3E2NF7RGP4ECEQ6XOEHU" Name="updatePassword" Nature="0" IsOverride="false">
        <AccessRules IsPublished="false" IsStatic="true"/>
        <Parameters>
          <Parameter Name="context" Id="mprHFQNZWL6FZGJLBRBT7CBMH7SYI">
            <Type TypeId="411" Path="adcGAHR344WHJGMXD6R73H5EAUYWI"/>
          </Parameter>
          <Parameter Name="password" Id="mpr4WLH3VVAPZCVTONTSLC6UIASRI">
            <Type TypeId="21"/>
          </Parameter>
          <Parameter Name="confirmation" Id="mprTETSNDW7H5B4NNITVH65MDASQQ">
            <Type TypeId="21"/>
          </Parameter>
        </Parameters>
        <ReturnType TypeId="21"/>
        <Sources>
          <Src>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> userName = (</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>)context.getHolderModel().
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adc24D3IJUTHVH7HJZFW2PSATWURU mthI4ZEAFBPYRGELAKWN3W2VE4SA4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecSY4KIOLTGLNRDHRZABQAQH3XQ4 colEF6ODCYWY3NBDGMCABQAQH3XQ4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>).</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcYPRT23KRRVAX7AN3727VBD5VI4 mthLSANOBLXINHNPFDVOGRUZDVNV4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>();
        
if  (userName == null)
    {
        final </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> userTemporaryName = "USER_TMP_NAME";//настоящий пользователь все равно будет введен
                                                      //т.к. свойство мандаторное, и текущий пароль будет сброшен  
        userName = userTemporaryName;
    //context.Environment.messageError(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsARN4SHYK2FCYFDJEOWN76FFQEU"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsINYTB4ZWBJFKRK5JLFAU5EUK2I"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>); //RADIX-8464
    //return;
}

</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> val1 = confirmation;
</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> val2 = password;
if (val1 == null || val1.isEmpty()) {
    context.Environment.messageError(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mls2IZOMZMJ4VETPNK3BTIYBZQEDU"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsXKRL76V5NFBWDCNKZX3VLCCB3E"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
    return null;
}
if (!val1.equals(val2)) {
    context.Environment.messageError(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsFR72NLZJEBFFFPMYWU6KW27YFY"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsIPYRUKJ6YFAXVM5FALAGFO4624"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
    return null;
}

</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="2"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> pwdMinLen = (</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="2"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>)context.getHolderModel().
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adc24D3IJUTHVH7HJZFW2PSATWURU mthI4ZEAFBPYRGELAKWN3W2VE4SA4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecSY4KIOLTGLNRDHRZABQAQH3XQ4 prd5JJ4FIVBQ5BXXLNLCF53LI5R5I"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>).</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcYPRT23KRRVAX7AN3727VBD5VI4 mthLSANOBLXINHNPFDVOGRUZDVNV4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>();
</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="1"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> mustHaveAChars = (</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="1"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>)context.getHolderModel().
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adc24D3IJUTHVH7HJZFW2PSATWURU mthI4ZEAFBPYRGELAKWN3W2VE4SA4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecSY4KIOLTGLNRDHRZABQAQH3XQ4 prdDQRA3ZQRNNGGVOKXRNXBXFJ4IE"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>).</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcYPRT23KRRVAX7AN3727VBD5VI4 mthLSANOBLXINHNPFDVOGRUZDVNV4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>();
</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="1"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> mustHaveNChars = (</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="1"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>)context.getHolderModel().
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adc24D3IJUTHVH7HJZFW2PSATWURU mthI4ZEAFBPYRGELAKWN3W2VE4SA4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecSY4KIOLTGLNRDHRZABQAQH3XQ4 prdYHSK36EVSNCZTK7KW3IO6Q663I"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>).</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcYPRT23KRRVAX7AN3727VBD5VI4 mthLSANOBLXINHNPFDVOGRUZDVNV4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>();
</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="1"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> mustDifferFromName = (</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="1"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>)context.getHolderModel().
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adc24D3IJUTHVH7HJZFW2PSATWURU mthI4ZEAFBPYRGELAKWN3W2VE4SA4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecSY4KIOLTGLNRDHRZABQAQH3XQ4 prdENYNYCMZF5H5ZAQJWKLHQUFJEM"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>).</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcYPRT23KRRVAX7AN3727VBD5VI4 mthLSANOBLXINHNPFDVOGRUZDVNV4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>();

</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcNGPHLVKYRZF2TFHKOOLH35WARM"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> reqs = new </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcNGPHLVKYRZF2TFHKOOLH35WARM mthK6OTZVIIKFDGBO7AQ3V3THRT5E" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(pwdMinLen == null ? 0 : pwdMinLen.intValue(),
                                                            mustHaveAChars == null ? false : mustHaveAChars.booleanValue(),
                                                            mustHaveNChars == null ? false : mustHaveNChars.booleanValue(),
                                                            mustDifferFromName == null || mustDifferFromName.booleanValue() == false ? null : java.util.Collections.&lt;String>singleton(userName));

</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcAYRF3G5BKZCVLFR7CGIZTFA7NI"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> weakness = </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcMNGECHDZOBBKVDOMOI5UB4CG5U"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcMNGECHDZOBBKVDOMOI5UB4CG5U mth5K62VPCHYRC47EN4UEM4FVPNKU" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(val1, reqs);
if (weakness == </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcAYRF3G5BKZCVLFR7CGIZTFA7NI"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.FROM_BLACK_LIST) {
    context.Environment.messageError(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsYZCXXM64CVDNPC7L3GV2XI6RKY"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mls4WDRHIT6SZD7LPM5SGPIOKF4L4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
    return null;
}
if (weakness == </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcAYRF3G5BKZCVLFR7CGIZTFA7NI"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.TOO_SHORT){
    context.Environment.messageError(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsU5KCUSOR7RC2VP2E3Z2AMTHWOY"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcVKGJPJRGY3NRDCKFABIFNQAABA"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcVKGJPJRGY3NRDCKFABIFNQAABA mthFTTYRRBGY3NRDCKFABIFNQAABA" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mls5NW3VBYARVB2VJ4WOD7RCB3BEY"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, pwdMinLen));
    return null;
}
if (weakness == </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcAYRF3G5BKZCVLFR7CGIZTFA7NI"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.NO_ALPHABETIC_CHARS){
    context.Environment.messageError(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsUIZHULKOURFZBKGAFMRZMY4CKA"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mls5NITVGG3Y5DRNHJNFGUIGT5CNM"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
    return null;
}
if (weakness == </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcAYRF3G5BKZCVLFR7CGIZTFA7NI"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.NO_NUMERIC_CHARS){
    context.Environment.messageError(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsXWRPK3M6FJCI3OMVMC25WVJYZQ"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>, </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsRNBAJETMFFGWJP3P46RBSNDTG4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>);
    return null;
}



byte[] bytes = org.radixware.kernel.common.auth.AuthUtils.calcPwdHash(userName, val1);
context.getHolderModel().
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adc24D3IJUTHVH7HJZFW2PSATWURU mthI4ZEAFBPYRGELAKWN3W2VE4SA4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecSY4KIOLTGLNRDHRZABQAQH3XQ4 col53PYQMVBCDNRDHQQABQAQH3XQ4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>).
        </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcYPRT23KRRVAX7AN3727VBD5VI4 mthZBTI63XF4RBXJJXOH54ZV3GT6I" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="411" Path="adcWQXERQYKIJHFRLULJ7V3XR32C4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>.</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcNC7RELKU45EFBK2XRUG6T2L5DE mthLOCUMHMZ5ZDG7NDBYGMWSCLZBU" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(bytes));

</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> modifyUser = context.getHolderModel().
                            </xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adc24D3IJUTHVH7HJZFW2PSATWURU mthI4ZEAFBPYRGELAKWN3W2VE4SA4" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="aecSY4KIOLTGLNRDHRZABQAQH3XQ4 colEF6ODCYWY3NBDGMCABQAQH3XQ4"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>).</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:IdReference Path="adcYPRT23KRRVAX7AN3727VBD5VI4 mth7OXSCLQHDFCWJNUZN7LX5OO7VE" Invoke="true"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>();

</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:TypeDeclaration TypeId="21"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java> currUser = context.Environment.UserName;

context.Environment.Tracer.event(
        String.format(</xsc:Java>
            </xsc:Item>
            <xsc:Item>
              <xsc:LocalizedString StringId="mlsIHAATMCNUFEUBLJTASGQCX6QXU"/>
            </xsc:Item>
            <xsc:Item>
              <xsc:Java>,
                     currUser, modifyUser)
        );
return val1;
</xsc:Java>
            </xsc:Item>
          </Src>
        </Sources>
      </Method>
    </Methods>
  </AdsClassDefinition>
</AdsDefinition>
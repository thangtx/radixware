/*
 * Copyright (c) 2008-2015, Compass Plus Limited. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public License,
 * v. 2.0. If a copy of the MPL was not distributed with this file, You can
 * obtain one at http://mozilla.org/MPL/2.0/. This Source Code is distributed
 * WITHOUT ANY WARRANTY; including any implied warranties but not limited to
 * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * Mozilla Public License, v. 2.0. for more details.
 */

/*
 * AdsClassEditorView.java
 *
 * Created on Feb 13, 2009, 4:21:33 PM
 */
package org.radixware.kernel.designer.ads.editors.clazz.algo;

import org.radixware.kernel.designer.ads.editors.clazz.simple.*;
import java.awt.Dimension;
import javax.swing.Box;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JPanel;
import org.openide.util.NbBundle;
import org.radixware.kernel.common.defs.RadixObject;
import org.radixware.kernel.common.defs.ads.AdsDefinition;
import org.radixware.kernel.common.defs.ads.clazz.AdsClassDef;
import org.radixware.kernel.common.defs.ads.clazz.algo.AdsAlgoClassDef;
import org.radixware.kernel.designer.common.editors.jml.JmlEditor;
import org.radixware.kernel.designer.common.general.editors.OpenInfo;

public class AdsAlgoEditorTabbedPane extends JPanel {

    private boolean initialized = false;
    private MainPanel mainClassPanel = null;
    private JmlEditor headerPanel = null, bodyPanel = null;
    private ParametersPanel parametersPanel = null;

    /**
     * Creates new form AdsClassEditorView
     */
    public AdsAlgoEditorTabbedPane() {
        super();
        initComponents();
    }

    @Override
    public Dimension getPreferredSize() {
        return super.getPreferredSize();
    }

    private JComponent createTabComponent(String title) {
        JComponent tabComp = Box.createHorizontalBox();
        tabComp.add(new JLabel(title));
        return tabComp;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JPanel();
        tabbedPane = new javax.swing.JTabbedPane();

        javax.swing.GroupLayout jTabbedPane1Layout = new javax.swing.GroupLayout(jTabbedPane1);
        jTabbedPane1.setLayout(jTabbedPane1Layout);
        jTabbedPane1Layout.setHorizontalGroup(
            jTabbedPane1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        jTabbedPane1Layout.setVerticalGroup(
            jTabbedPane1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );

        setLayout(new java.awt.BorderLayout());
        add(tabbedPane, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents

    public void open(RadixObject radixObject, OpenInfo info) {

        if (!initialized) {
            initialized = true;

            //general tab
            mainClassPanel = new MainPanel();
            tabbedPane.addTab(NbBundle.getMessage(getClass(), "TabbedPane.General.text"), mainClassPanel);
//            tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(mainClassPanel),
//                    createTabComponent("Base Class Panel"));
            mainClassPanel.open(radixObject, info);            

            //header tab
            headerPanel = new JmlEditor();
            tabbedPane.addTab(NbBundle.getMessage(getClass(), "TabbedPane.Header.text"), headerPanel);
//            tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(headerPanel),
//                    createTabComponent("Header"));
            headerPanel.open(((AdsClassDef) radixObject).getHeader().ensureFirst());

            //body tab
            bodyPanel = new JmlEditor();
            tabbedPane.addTab(NbBundle.getMessage(getClass(), "TabbedPane.Body.text"), bodyPanel);
//            tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(bodyPanel),
//                    createTabComponent("Body"));
            bodyPanel.open(((AdsClassDef) radixObject).getBody().ensureFirst());

            //parameters tab
            parametersPanel = new ParametersPanel();
            tabbedPane.addTab(NbBundle.getMessage(getClass(), "TabbedPane.Parameters.text"), parametersPanel);
//            tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(parametersPanel),
//                    createTabComponent("Parameters"));
            parametersPanel.open((AdsAlgoClassDef) radixObject);

            tabbedPane.setSelectedIndex(tabbedPane.indexOfComponent(mainClassPanel));
        }
    }

    public void update() {
        mainClassPanel.update();
        headerPanel.update();
        bodyPanel.update();
        parametersPanel.update();
    }

    public void setReadonly(boolean readonly) {
        mainClassPanel.setReadonly(readonly);
        headerPanel.setEditable(!readonly);
        bodyPanel.setEditable(!readonly);
        parametersPanel.setReadonly(readonly);
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel jTabbedPane1;
    private javax.swing.JTabbedPane tabbedPane;
    // End of variables declaration//GEN-END:variables
}
